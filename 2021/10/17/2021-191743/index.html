<!DOCTYPE html><html class="appearance-auto" lang="zh-TW"><head><meta charset="UTF-8"><title>Robot Framework - 介紹一下 - sqz777's blog</title><meta name="description" content="最近要介紹新人 Robot Framework 的時候發現自己居然沒寫過這個已經用很久的工具，所以決定來介紹一下 Robot Framework 🤩
這篇目的是讓一般人能夠看懂 Robot Framework 的文件並了解其中各個部分的目的

介紹與使用場景Robot Framework 是一.."><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><meta name="image" content="https://blogs.sqz777.com/img/2021-191743/1634469178.png"><meta name="original-source" content="https://blogs.sqz777.com/2021/10/17/2021-191743/"><link rel="canonical" href="https://blogs.sqz777.com/2021/10/17/2021-191743/"><meta property="og:locale" content="zh-TW"><meta property="og:type" content="article"><meta property="og:title" content="Robot Framework - 介紹一下 - sqz777's blog"><meta property="og:description" content="最近要介紹新人 Robot Framework 的時候發現自己居然沒寫過這個已經用很久的工具，所以決定來介紹一下 Robot Framework 🤩
這篇目的是讓一般人能夠看懂 Robot Framework 的文件並了解其中各個部分的目的

介紹與使用場景Robot Framework 是一.."><meta property="og:url" content="https://blogs.sqz777.com/2021/10/17/2021-191743/"><meta property="og:site_name" content="SQZ777's blog"><meta property="og:image" content="https://blogs.sqz777.com/img/2021-191743/1634469178.png"><meta property="fb:app_id" content="000000000000000"><meta name="twitter:title" content="Robot Framework - 介紹一下 - sqz777's blog"><meta name="twitter:image" content="https://blogs.sqz777.com/img/2021-191743/1634469178.png"><meta name="twitter:description" content="最近要介紹新人 Robot Framework 的時候發現自己居然沒寫過這個已經用很久的工具，所以決定來介紹一下 Robot Framework 🤩
這篇目的是讓一般人能夠看懂 Robot Framework 的文件並了解其中各個部分的目的

介紹與使用場景Robot Framework 是一.."><meta name="twitter:card" content="summary_large_image"><meta name="google-site-verification" content="lTAMT4U8v-CtkYRIo8AmGaACB3EikdUYpiTHAylwGPE"><!-- Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-4N118JY08V"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-4N118JY08V');</script><!-- End Google Analytics --><link rel="icon" href="/images/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><link rel="stylesheet" href="/style/common/jquery.fancybox.min.css"><script src="/js/highlight.pack.js"></script><meta name="generator" content="Hexo 7.2.0"><link rel="alternate" href="/atom.xml" title="SQZ777's blog" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">sqz777's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Robot Framework - 介紹一下</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">點擊返回開頭</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">首頁</a></h3><h3 class="is-inline-block"><a href="/about">關於我</a></h3><h3 class="is-inline-block"><a href="/archives">文章列表</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">首頁</a></h3><h3 class="is-inline-block"><a href="/about">關於我</a></h3><h3 class="is-inline-block"><a href="/archives">文章列表</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8B%E7%B4%B9%E8%88%87%E4%BD%BF%E7%94%A8%E5%A0%B4%E6%99%AF"><span class="toc-text">介紹與使用場景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%82%BA%E4%BD%95%E4%BD%BF%E7%94%A8-Robot-Framework"><span class="toc-text">為何使用 Robot Framework?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9C%8B%E6%87%82-Robot-Framework"><span class="toc-text">看懂 Robot Framework</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Settings"><span class="toc-text">*** Settings ***</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Variables"><span class="toc-text">*** Variables ***</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Keywords"><span class="toc-text">*** Keywords ***</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Test-Cases"><span class="toc-text">*** Test Cases ***</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%96%8B%E7%99%BC%E6%BA%96%E5%82%99"><span class="toc-text">開發準備</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%87%89%E7%94%A8%E5%A0%B4%E6%99%AF"><span class="toc-text">應用場景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Repo-%E9%BB%9E%E6%88%91"><span class="toc-text">Repo 點我</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%B7%E8%A1%8C"><span class="toc-text">執行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%B7%E8%A1%8C%E4%B8%AD"><span class="toc-text">執行中</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%B7%E8%A1%8C%E5%BE%8C"><span class="toc-text">執行後</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%8C%E8%A8%98"><span class="toc-text">後記</span></a></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/RobotFramework"><i class="tag post-item-tag">RobotFramework</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">Robot Framework - 介紹一下</h1><time class="has-text-grey" datetime="2021-10-17T00:00:00.000Z">2021-10-17</time><article class="mt-2 post-content"><p>最近要介紹新人 Robot Framework 的時候發現自己居然沒寫過這個已經用很久的工具，所以決定來介紹一下 Robot Framework 🤩</p>
<p>這篇目的是讓一般人能夠看懂 Robot Framework 的文件並了解其中各個部分的目的</p>
<p><img src="/img/2021-191743/1634469178.png"></p>
<h2 id="介紹與使用場景"><a href="#介紹與使用場景" class="headerlink" title="介紹與使用場景"></a>介紹與使用場景</h2><p>Robot Framework 是一個基於 python 的 自動化框架，基本上可以用 python 達成的事情，Robot Framework 都可以做到，其應用的場景是 ATDD (Acceptance Test Driven Development)、BDD (Behavior Driven Development) 以及可以被機器化的流程。</p>
<p><img src="/img/2021-191743/1634469201.png"></p>
<h2 id="為何使用-Robot-Framework"><a href="#為何使用-Robot-Framework" class="headerlink" title="為何使用 Robot Framework?"></a>為何使用 Robot Framework?</h2><ul>
<li>學習資源易於取得</li>
<li>易於理解與學習的介面</li>
<li>已有豐富的 Keyword 可以使用</li>
</ul>
<p>Robot Framework 對於沒有程式基礎的人來說是「相對」易於理解的，因為他有最接近人類自然語言的介面讓人閱讀，在政治條件（？）上比較能夠說服他人使用這個工具。</p>
<p>你通常不太需要再自行開發 Keyword 就可以完成你需要執行的自動化流程，如果需要，你也能夠透過實作 Python 來完成你需要做的事。</p>
<h2 id="看懂-Robot-Framework"><a href="#看懂-Robot-Framework" class="headerlink" title="看懂 Robot Framework"></a>看懂 Robot Framework</h2><p>先來張圖，這張圖是 Robot Framework 的文件，紅框的部分：</p>
<p><img src="/img/2021-191743/1634469224.png"></p>
<h2 id="Settings"><a href="#Settings" class="headerlink" title="*** Settings ***"></a>*** Settings ***</h2><p>這裡是引入 library 以及初始化的地方</p>
<p><img src="/img/2021-191743/1634469248.png"></p>
<ul>
<li>如果你在別的 .robot 中定義好了需要被引入的 library 或是 Keywords 可以透過 Resource 來達成引入的動作</li>
<li>Suite Setup 則是在測試跑起來時會做的初始化動作</li>
</ul>
<p>這邊幫自己挖個坑，會再發一篇 Suite Setup 跟 Test Setup 的差別。<br>此坑已補上： <a target="_blank" rel="noopener" href="https://dotblogs.com.tw/Im_sqz777/2021/11/16/224604">Robot Framework - Suite Setup V.S Test Setup | sqz777 der 技術小本本 - 點部落 (dotblogs.com.tw)</a>  </p>
<p><img src="/img/2021-191743/1634469266.png"></p>
<p>看一下 settings.robot</p>
<p><img src="/img/2021-191743/1634469282.png"></p>
<p>會使用 settings.robot 來統一引入 library 的原因是為了避免 .robot 的檔案多了，每一個檔案都要重新引入那些 library 實在是麻煩，所以乾脆由一個 file 來控制需要被引入的 library，這樣簡單得多。<br>Variables 讓你可以直接透過檔案的形式讓你引入環境變數<br>Library 則是讓你可以引入 python 或是 Robot Framework 的 library<br>RequestsLibrary 是別人開發好的 Robot Framework 的 Library，需要使用以下指令安裝後才能使用，這個 library 可以讓我們省掉開發 Requests Keyword 的時間。</p>
<pre><code>python -m pip install robotframework-requests
</code></pre>
<p><a target="_blank" rel="noopener" href="https://marketsquare.github.io/robotframework-requests/doc/RequestsLibrary.html">RequestsLibrary Keyword 使用方法的文件點我</a></p>
<h2 id="Variables"><a href="#Variables" class="headerlink" title="*** Variables ***"></a>*** Variables ***</h2><p>這裡是定義這個檔案中會用到的常數</p>
<p><img src="/img/2021-191743/1634469327.png"></p>
<p>通常這裡的變數不會直接寫死在這裡，而是會在另一個檔案中定義 config.ini 之類的然後在透過變數來做取用</p>
<p>所以我這邊也是再挖一個坑，會再發一篇如何定義 config.ini 然後在 robot 裡面中引用那個環境變數<br>此坑已補上：<a target="_blank" rel="noopener" href="https://dotblogs.com.tw/Im_sqz777/2021/11/08/204911">Robot Framework - 使用 config.ini 管理環境變數 | sqz777 der 技術小本本 - 點部落 (dotblogs.com.tw)</a></p>
<p><img src="/img/2021-191743/1634469353.png"></p>
<h2 id="Keywords"><a href="#Keywords" class="headerlink" title="*** Keywords ***"></a>*** Keywords ***</h2><p>這裡是自定義關鍵字的地方，可以在這裡定義好關鍵字後，在 Test Case 中使用</p>
<p><img src="/img/2021-191743/1634469372.png"></p>
<p>Get Character With Beginning Of The Name，這個是 Keyword 的名稱</p>
<p>[Arguments] 讓 Keyword 被定義成是可以被傳入參數的，而這個參數名稱是 character_name，定義完成後即可在 Test Case 中使用</p>
<p>而 Keyword 再往下一層則是 python 的程式碼，以圖中行號 13 的 Get Md5 Hash 為例，這個 Get Md5 Hash 是我自行實作在 <a target="_blank" rel="noopener" href="http://common.py/">common.py</a> 的一段 python code</p>
<p>P.S. <a target="_blank" rel="noopener" href="http://common.py/">common.py</a> 已在 settings.robot 中引入。</p>
<pre><code>import hashlib

def get_md5_hash(data):
    hasher = hashlib.md5()
    hasher.update(data.encode(&quot;utf-8&quot;))
    return hasher.hexdigest()
</code></pre>
<p>以此為例，你可以使用 Get Md5 Hash 或是 get_md5_hash 都可以，只要文件內有統一的格式即可。</p>
<p>其他的 Keyword 對應官方文件有</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://robotframework.org/robotframework/latest/libraries/BuiltIn.html#Get%20Time">Get Time</a><br>可以指定格式取得 Datetime</li>
<li><a target="_blank" rel="noopener" href="https://robotframework.org/robotframework/latest/libraries/BuiltIn.html#Create%20Dictionary">Create Dictionary</a><br>建立 Dictionary</li>
<li><a target="_blank" rel="noopener" href="https://marketsquare.github.io/robotframework-requests/doc/RequestsLibrary.html#GET%20On%20Session">Get On Session</a><br>建立於 Session 上來 request 其方法為 Get</li>
<li><a target="_blank" rel="noopener" href="https://robotframework.org/robotframework/latest/libraries/BuiltIn.html#Return%20From%20Keyword">Return From Keyword</a><br>Get Character With Beginning Of The Name 這一個 Keyword 即將返回的值</li>
<li><a target="_blank" rel="noopener" href="https://robotframework.org/robotframework/latest/libraries/BuiltIn.html#Should%20Be%20Equal%20As%20Strings">Should Be Equal As Strings</a><br>斷言（Assert）兩個值的型態為 string 時會是相同的。</li>
</ul>
<h2 id="Test-Cases"><a href="#Test-Cases" class="headerlink" title="*** Test Cases ***"></a><strong>*** Test Cases ***</strong></h2><p>這裡是定義 Test Case 的地方，會透過使用 Keyword 來組合成需要被自動化的流程</p>
<p><img src="/img/2021-191743/1634469384.png"></p>
<h2 id="開發準備"><a href="#開發準備" class="headerlink" title="開發準備"></a><strong>開發準備</strong></h2><p>開發前要準備的就是環境啦</p>
<ul>
<li><p>python</p>
</li>
<li><p>python package: robotframework</p>
</li>
<li><p>python package: robotframework-requests</p>
<p>python -m pip install robotframework robotframework-requests</p>
</li>
</ul>
<h2 id="應用場景"><a href="#應用場景" class="headerlink" title="應用場景"></a><strong>應用場景</strong></h2><p>package 安裝完成後，就可以開始寫一些需要自動化的項目了，開始寫之前先決定要做的自動化項目是什麼</p>
<ul>
<li>準備 request 過去 Marvel API 的 token 資訊，Marvel API 的 token 申請，可以參考 repo 中的 readme </li>
<li>透過 Marvel 的 API 取得角色名稱開頭為 “Tony” 的角色資訊</li>
<li>唯一一個角色開頭為 “Tony” 的人就是 Tony Stark 所以必須要能取得 Tony Stark 這個名字</li>
</ul>
<p>robot 的 Test Suite 如下</p>
<pre><code>*** Settings ***
Resource    settings.robot
Suite Setup    Create Session    MARVEL_API    $/&#123;$/&#123;ENV/&#125;.MARVEL_URL/&#125;

*** Variables ***
$/&#123;api_private_key/&#125;=    $/&#123;$/&#123;ENV/&#125;.MARVEL_PRIVATE_KEY/&#125;
$/&#123;api_public_key/&#125;=    $/&#123;$/&#123;ENV/&#125;.MARVEL_PUBLIC_KEY/&#125;

*** Keywords ***
Get Character With Beginning Of The Name
    [Arguments]    $/&#123;character_name/&#125;
    $/&#123;timestamp/&#125;=    Get Time    epoch
    $/&#123;hash/&#125;=    Get Md5 Hash    $/&#123;timestamp/&#125;$/&#123;api_private_key/&#125;$/&#123;api_public_key/&#125;
    $/&#123;params/&#125;=    Create Dictionary    ts=$/&#123;timestamp/&#125;    apikey=$/&#123;api_public_key/&#125;    hash=$/&#123;hash/&#125;    nameStartsWith=$/&#123;character_name/&#125;
    $/&#123;response/&#125;=    Get On Session    alias=MARVEL_API    url=/v1/public/characters    params=$/&#123;params/&#125;    expected_status=200
    Return From Keyword    $/&#123;response/&#125;

*** Test Cases ***
Get Beginning With Tony&#39;s Character Name Info
    $/&#123;result/&#125;=    Get Character With Beginning Of The Name    Tony
    Should Be Equal As Strings    $/&#123;result.json()[&quot;data&quot;][&quot;results&quot;][0][&quot;name&quot;]/&#125;    Tony Stark
</code></pre>
<h2 id="Repo-點我"><a href="#Repo-點我" class="headerlink" title="Repo 點我"></a><a target="_blank" rel="noopener" href="https://github.com/SQZ777/robotframework-marvel">Repo 點我</a></h2><h2 id="執行"><a href="#執行" class="headerlink" title="執行"></a>執行</h2><p>若要執行指令如下</p>
<pre><code>python -m robot --variable ENV:BLOG_ENV marvel.robot
</code></pre>
<h2 id="執行中"><a href="#執行中" class="headerlink" title="執行中"></a>執行中</h2><p><img src="/img/2021-191743/1637074430.png"></p>
<h2 id="執行後"><a href="#執行後" class="headerlink" title="執行後"></a>執行後</h2><p>在執行後可以看到 Robot Framework 產出的 report</p>
<p><img src="/img/2021-191743/1637074439.png"></p>
<p>在 report 中可以看到執行的時間與成功數量等，除此之外，你也能夠透過 report 看見執行的細節，例如 API 的 response json、該步驟的執行時間等</p>
<p><img src="/img/2021-191743/1637074452.png"></p>
<h2 id="後記"><a href="#後記" class="headerlink" title="後記"></a>後記</h2><p>這一篇介紹了為何要使用 Robot Framework，再到如何看懂 Robot Framework 的文件，希望大家可以因為這篇而看得懂 Robot Framework &lt;(_ _)&gt;</p>
<p>已補坑：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://dotblogs.com.tw/Im_sqz777/2021/11/16/224604">Suite Setup V.S. Test Setup</a></li>
<li><a target="_blank" rel="noopener" href="https://dotblogs.com.tw/Im_sqz777/2021/11/08/204911">在 Robot Framework 中，使用 config.ini 的檔案定義環境變數</a></li>
</ul>
<p>2021&#x2F;11&#x2F;16：補充執行所需的環境準備以及實際的題目應用。</p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2021/11/08/2021-204911/" title="Robot Framework - 使用 config.ini 管理環境變數"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">上一頁: Robot Framework - 使用 config.ini 管理環境變數</span></a><a class="button is-default" href="/2021/04/18/2021-235858/" title="筆記 - 4/17 技術管理者論壇－商業與技術的平衡"><span class="has-text-weight-semibold">下一頁: 筆記 - 4/17 技術管理者論壇－商業與技術的平衡</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="SQZ777/sqz777-blog" src="https://utteranc.es/client.js" issue-term="title" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/sqz777"><i class="iconfont icon-github"></i></a><!-- Ins--><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--></section><p><span>Copyright ©</span><span> sqz777 2024</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/jquery-3.6.1.min.js"></script><script src="/js/jquery-fancybox.min.js"></script><script src="/js/img_zoom.js"></script><script src="/js/post.js"></script></body></html>