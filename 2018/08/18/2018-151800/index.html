<!DOCTYPE html><html class="appearance-auto" lang="zh-TW"><head><meta charset="UTF-8"><title>筆記 - 匯出 Postman 執行結果的報表，使用 Newman ! - sqz777's blog</title><meta name="description" content="Newman 就是 postman 的 CLI
使用 Newman 最大的好處就是能夠讓 使用Postman做完的測試放進 CI 中這一篇的 Collection 會拿上一篇的來做~
環境準備
一樣要 nodeJS
Postman
npm install -g newman

執行前準備首先要準.."><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><meta name="image" content="https://sqz777.com/img/2018-151800/1534567580_27402.png"><meta name="original-source" content="https://sqz777.com/2018/08/18/2018-151800/"><link rel="canonical" href="https://sqz777.com/2018/08/18/2018-151800/"><meta property="og:locale" content="zh-TW"><meta property="og:type" content="article"><meta property="og:title" content="筆記 - 匯出 Postman 執行結果的報表，使用 Newman ! - sqz777's blog"><meta property="og:description" content="Newman 就是 postman 的 CLI
使用 Newman 最大的好處就是能夠讓 使用Postman做完的測試放進 CI 中這一篇的 Collection 會拿上一篇的來做~
環境準備
一樣要 nodeJS
Postman
npm install -g newman

執行前準備首先要準.."><meta property="og:url" content="https://sqz777.com/2018/08/18/2018-151800/"><meta property="og:site_name" content="SQZ777's blog"><meta property="og:image" content="https://sqz777.com/img/2018-151800/1534567580_27402.png"><meta property="fb:app_id" content="123456"><meta name="twitter:title" content="筆記 - 匯出 Postman 執行結果的報表，使用 Newman ! - sqz777's blog"><meta name="twitter:image" content="https://sqz777.com/img/2018-151800/1534567580_27402.png"><meta name="twitter:description" content="Newman 就是 postman 的 CLI
使用 Newman 最大的好處就是能夠讓 使用Postman做完的測試放進 CI 中這一篇的 Collection 會拿上一篇的來做~
環境準備
一樣要 nodeJS
Postman
npm install -g newman

執行前準備首先要準.."><meta name="twitter:card" content="summary_large_image"><meta name="google-site-verification" content="lTAMT4U8v-CtkYRIo8AmGaACB3EikdUYpiTHAylwGPE"><!-- Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-4N118JY08V"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-4N118JY08V');</script><!-- End Google Analytics --><link rel="icon" href="/images/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><link rel="stylesheet" href="/style/common/jquery.fancybox.min.css"><script src="/js/highlight.pack.js"></script><meta name="generator" content="Hexo 7.2.0"><link rel="alternate" href="/atom.xml" title="SQZ777's blog" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">sqz777's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">筆記 - 匯出 Postman 執行結果的報表，使用 Newman !</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">點擊返回開頭</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">首頁</a></h3><h3 class="is-inline-block"><a href="/about">關於我</a></h3><h3 class="is-inline-block"><a href="/archives">文章列表</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">首頁</a></h3><h3 class="is-inline-block"><a href="/about">關於我</a></h3><h3 class="is-inline-block"><a href="/archives">文章列表</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%92%B0%E5%A2%83%E6%BA%96%E5%82%99"><span class="toc-text">環境準備</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%B7%E8%A1%8C%E5%89%8D%E6%BA%96%E5%82%99"><span class="toc-text">執行前準備</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Collection-%E5%8C%AF%E5%87%BA"><span class="toc-text">Collection 匯出</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Environment-%E5%8C%AF%E5%87%BA"><span class="toc-text">Environment 匯出</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%B7%E8%A1%8C"><span class="toc-text">執行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A0%B1%E8%A1%A8"><span class="toc-text">報表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#HTML"><span class="toc-text">HTML</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%82%99%E8%A8%BB"><span class="toc-text">備註</span></a></li></ol></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/Test"><i class="tag post-item-tag">Test</i></a><a href="/tags/API"><i class="tag post-item-tag">API</i></a><a href="/tags/CLI"><i class="tag post-item-tag">CLI</i></a><a href="/tags/Postman"><i class="tag post-item-tag">Postman</i></a><a href="/tags/Newman"><i class="tag post-item-tag">Newman</i></a><a href="/tags/Reporter"><i class="tag post-item-tag">Reporter</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">筆記 - 匯出 Postman 執行結果的報表，使用 Newman !</h1><time class="has-text-grey" datetime="2018-08-18T00:00:00.000Z">2018-08-18</time><article class="mt-2 post-content"><p>Newman 就是 postman 的 CLI</p>
<p>使用 Newman 最大的好處就是能夠讓 使用Postman做完的測試放進 CI 中<br>這一篇的 Collection 會拿<a target="_blank" rel="noopener" href="https://dotblogs.com.tw/im_sqz777/2018/08/16/002431">上一篇的</a>來做~</p>
<h2 id="環境準備"><a href="#環境準備" class="headerlink" title="環境準備"></a>環境準備</h2><ul>
<li><a target="_blank" rel="noopener" href="https://nodejs.org/en/">一樣要 nodeJS</a></li>
<li><a target="_blank" rel="noopener" href="https://www.getpostman.com/apps">Postman</a></li>
<li><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/newman">npm install -g newman</a></li>
</ul>
<h2 id="執行前準備"><a href="#執行前準備" class="headerlink" title="執行前準備"></a>執行前準備</h2><p>首先要準備好 1 個 collection 跟 enviroment(如果有) 的json</p>
<h3 id="Collection-匯出"><a href="#Collection-匯出" class="headerlink" title="Collection 匯出"></a>Collection 匯出</h3><p>準備一個你要使用的 collection <br>可以用 Postman 進行匯出</p>
<p><img src="/img/2018-151800/1534567580_27402.png"></p>
<p>再來選擇格式，選他推薦的那一個(Collection v2.1 (recommended))就可以了</p>
<p><img src="/img/2018-151800/1534567674_27278.png"></p>
<h3 id="Environment-匯出"><a href="#Environment-匯出" class="headerlink" title="Environment 匯出"></a>Environment 匯出</h3><p>點選右上角齒輪</p>
<p><img src="/img/2018-151800/1534574005_39127.png"></p>
<p>會跑出你擁有的那些 environment，點選像是下載的按鈕就可以將 environment 檔案匯出</p>
<p><img src="/img/2018-151800/1534573953_98567.png"></p>
<h2 id="執行"><a href="#執行" class="headerlink" title="執行"></a>執行</h2><p>使用 newman run ‘collection path’ 來執行要執行的 collection</p>
<p>如果拿範例檔直接執行該 collection 是不行的，如下圖</p>
<p><img src="/img/2018-151800/1534574119_14167.png"></p>
<p>原因是因為你需要在指令加上你的 environment 檔<br>所以你需要這樣下指令</p>
<p>newman run “collection path” -e “environment path”</p>
<p>會像是這個樣子</p>
<p><img src="/img/2018-151800/1534574527_15855.png"></p>
<p>你的colleciton path 或是 environment path 也可以是 URL 的形式</p>
<p>以官網的範例為例</p>
<p> newman run <a target="_blank" rel="noopener" href="https://www.getpostman.com/collections/631643-f695cab7-6878-eb55-7943-ad88e1ccfd65-JsLv">https://www.getpostman.com/collections/631643-f695cab7-6878-eb55-7943-ad88e1ccfd65-JsLv</a></p>
<h2 id="報表"><a href="#報表" class="headerlink" title="報表"></a>報表</h2><p>報表是測試很重要的東西，newman本身也有2個預設的匯出格式</p>
<ul>
<li><strong>json</strong></li>
<li><strong>junit (XML)</strong></li>
</ul>
<p>使用匯出報表的指令為 -r ，以下為範例</p>
<p>newman run “collection path” -r json</p>
<p>如果要一次匯出 2 種格式的報表則用 “,” 做分隔，以下為範例</p>
<p>newman run “collection path” -r json,junit</p>
<p><strong>注意: ,中間不要空白</strong></p>
<p><strong>下圖來源為 <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/newman#reporters">newman npm連結​</a>****<img src="/img/2018-151800/1534575925_51306.png"></strong></p>
<p>外部的產出報表形式也有好幾種，因為目前只用到 HTML ，所以用HTML來當範例，有興趣的人可以進去其他類型的報表看一看~</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/postmanlabs/newman-reporter-html">HTML</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/leafle/newman-reporter-teamcity">TeamCity</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/Paramagnetic/newman-reporter-json-light">JSON-Light</a></li>
</ul>
<h3 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h3><p>前置動作需要先安裝 newman reporter</p>
<p>npm install -g newman-reporter-html</p>
<p>下個指令</p>
<p>newman run “collection path” -r html</p>
<p>執行過程如下圖</p>
<p><img src="/img/2018-151800/1534576324_58712.png"></p>
<p>匯出的HTML會長這個樣子</p>
<p><img src="/img/2018-151800/1534575348_68156.png"></p>
<h3 id="備註"><a href="#備註" class="headerlink" title="備註"></a>備註</h3><p>如果你覺得匯出報表時在command中也要看到 執行的過程與資訊可以下 -r  的時候附加 cli</p>
<p>newman run “collection path” -r html,cli</p>
<p>執行過程如下</p>
<p><img src="/img/2018-151800/1534576418_06839.png"></p>
<p>感謝各位收看 &lt;(_ _)&gt;</p>
<p>如果文章有錯誤 麻煩告知我</p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2018/09/06/2018-222529/" title="筆記 - 在 Postman 使用 CSV 一次完成相同欄位但不同資料的 Request"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">上一頁: 筆記 - 在 Postman 使用 CSV 一次完成相同欄位但不同資料的 Request</span></a><a class="button is-default" href="/2018/08/14/2018-230816/" title="筆記 - 幫自己寫一個 CLI 來幫自己建資料夾!  使用 Node.js 的 commander!"><span class="has-text-weight-semibold">下一頁: 筆記 - 幫自己寫一個 CLI 來幫自己建資料夾!  使用 Node.js 的 commander!</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="SQZ777/sqz777-blog" src="https://utteranc.es/client.js" issue-term="title" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/sqz777"><i class="iconfont icon-github"></i></a><!-- Ins--><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--></section><p><span>Copyright ©</span><span> sqz777 2024</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/jquery-3.6.1.min.js"></script><script src="/js/jquery-fancybox.min.js"></script><script src="/js/img_zoom.js"></script><script src="/js/post.js"></script></body></html>