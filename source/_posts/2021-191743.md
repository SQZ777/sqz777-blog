
---
title: "Robot Framework - ä»‹ç´¹ä¸€ä¸‹"
date: 2021-10-17
tags: 
  - 'RobotFramework'
---

æœ€è¿‘è¦ä»‹ç´¹æ–°äºº Robot Framework çš„æ™‚å€™ç™¼ç¾è‡ªå·±å±…ç„¶æ²’å¯«éé€™å€‹å·²ç¶“ç”¨å¾ˆä¹…çš„å·¥å…·ï¼Œæ‰€ä»¥æ±ºå®šä¾†ä»‹ç´¹ä¸€ä¸‹ Robot Framework ğŸ¤©

é€™ç¯‡ç›®çš„æ˜¯è®“ä¸€èˆ¬äººèƒ½å¤ çœ‹æ‡‚ Robot Framework çš„æ–‡ä»¶ä¸¦äº†è§£å…¶ä¸­å„å€‹éƒ¨åˆ†çš„ç›®çš„

![](/img/2021-191743/1634469178.png)

ä»‹ç´¹èˆ‡ä½¿ç”¨å ´æ™¯
-------

Robot Framework æ˜¯ä¸€å€‹åŸºæ–¼ python çš„ è‡ªå‹•åŒ–æ¡†æ¶ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥ç”¨ python é”æˆçš„äº‹æƒ…ï¼ŒRobot Framework éƒ½å¯ä»¥åšåˆ°ï¼Œå…¶æ‡‰ç”¨çš„å ´æ™¯æ˜¯ ATDD (Acceptance Test Driven Development)ã€BDD (Behavior Driven Development) ä»¥åŠå¯ä»¥è¢«æ©Ÿå™¨åŒ–çš„æµç¨‹ã€‚

![](/img/2021-191743/1634469201.png)

ç‚ºä½•ä½¿ç”¨ Robot Framework?
---------------------

*   å­¸ç¿’è³‡æºæ˜“æ–¼å–å¾—
*   æ˜“æ–¼ç†è§£èˆ‡å­¸ç¿’çš„ä»‹é¢
*   å·²æœ‰è±å¯Œçš„ Keyword å¯ä»¥ä½¿ç”¨

Robot Framework å°æ–¼æ²’æœ‰ç¨‹å¼åŸºç¤çš„äººä¾†èªªæ˜¯ã€Œç›¸å°ã€æ˜“æ–¼ç†è§£çš„ï¼Œå› ç‚ºä»–æœ‰æœ€æ¥è¿‘äººé¡è‡ªç„¶èªè¨€çš„ä»‹é¢è®“äººé–±è®€ï¼Œåœ¨æ”¿æ²»æ¢ä»¶ï¼ˆï¼Ÿï¼‰ä¸Šæ¯”è¼ƒèƒ½å¤ èªªæœä»–äººä½¿ç”¨é€™å€‹å·¥å…·ã€‚

ä½ é€šå¸¸ä¸å¤ªéœ€è¦å†è‡ªè¡Œé–‹ç™¼ Keyword å°±å¯ä»¥å®Œæˆä½ éœ€è¦åŸ·è¡Œçš„è‡ªå‹•åŒ–æµç¨‹ï¼Œå¦‚æœéœ€è¦ï¼Œä½ ä¹Ÿèƒ½å¤ é€éå¯¦ä½œ Python ä¾†å®Œæˆä½ éœ€è¦åšçš„äº‹ã€‚

çœ‹æ‡‚ Robot Framework
------------------

å…ˆä¾†å¼µåœ–ï¼Œé€™å¼µåœ–æ˜¯ Robot Framework çš„æ–‡ä»¶ï¼Œç´…æ¡†çš„éƒ¨åˆ†ï¼š

![](/img/2021-191743/1634469224.png)

\*\*\* Settings \*\*\*
----------------------

é€™è£¡æ˜¯å¼•å…¥ library ä»¥åŠåˆå§‹åŒ–çš„åœ°æ–¹

![](/img/2021-191743/1634469248.png)

*   å¦‚æœä½ åœ¨åˆ¥çš„ .robot ä¸­å®šç¾©å¥½äº†éœ€è¦è¢«å¼•å…¥çš„ library æˆ–æ˜¯ Keywords å¯ä»¥é€é Resource ä¾†é”æˆå¼•å…¥çš„å‹•ä½œ
*   Suite Setup å‰‡æ˜¯åœ¨æ¸¬è©¦è·‘èµ·ä¾†æ™‚æœƒåšçš„åˆå§‹åŒ–å‹•ä½œ

é€™é‚Šå¹«è‡ªå·±æŒ–å€‹å‘ï¼Œæœƒå†ç™¼ä¸€ç¯‡ Suite Setup è·Ÿ Test Setup çš„å·®åˆ¥ã€‚  
æ­¤å‘å·²è£œä¸Šï¼š [Robot Framework - Suite Setup V.S Test Setup | sqz777 der æŠ€è¡“å°æœ¬æœ¬ - é»éƒ¨è½ (dotblogs.com.tw)](https://dotblogs.com.tw/Im_sqz777/2021/11/16/224604) Â 

![](/img/2021-191743/1634469266.png)

çœ‹ä¸€ä¸‹ settings.robot

![](/img/2021-191743/1634469282.png)

æœƒä½¿ç”¨ settings.robot ä¾†çµ±ä¸€å¼•å…¥ library çš„åŸå› æ˜¯ç‚ºäº†é¿å… .robot çš„æª”æ¡ˆå¤šäº†ï¼Œæ¯ä¸€å€‹æª”æ¡ˆéƒ½è¦é‡æ–°å¼•å…¥é‚£äº› library å¯¦åœ¨æ˜¯éº»ç…©ï¼Œæ‰€ä»¥ä¹¾è„†ç”±ä¸€å€‹ file ä¾†æ§åˆ¶éœ€è¦è¢«å¼•å…¥çš„ libraryï¼Œé€™æ¨£ç°¡å–®å¾—å¤šã€‚  
Variables è®“ä½ å¯ä»¥ç›´æ¥é€éæª”æ¡ˆçš„å½¢å¼è®“ä½ å¼•å…¥ç’°å¢ƒè®Šæ•¸  
Library å‰‡æ˜¯è®“ä½ å¯ä»¥å¼•å…¥ python æˆ–æ˜¯ Robot Framework çš„ library  
RequestsLibrary æ˜¯åˆ¥äººé–‹ç™¼å¥½çš„ Robot Framework çš„ Libraryï¼Œéœ€è¦ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤å®‰è£å¾Œæ‰èƒ½ä½¿ç”¨ï¼Œé€™å€‹ library å¯ä»¥è®“æˆ‘å€‘çœæ‰é–‹ç™¼ Requests Keyword çš„æ™‚é–“ã€‚

    python -m pip install robotframework-requests

[RequestsLibrary Keyword ä½¿ç”¨æ–¹æ³•çš„æ–‡ä»¶é»æˆ‘](https://marketsquare.github.io/robotframework-requests/doc/RequestsLibrary.html)

\*\*\* Variables \*\*\*
-----------------------

é€™è£¡æ˜¯å®šç¾©é€™å€‹æª”æ¡ˆä¸­æœƒç”¨åˆ°çš„å¸¸æ•¸

![](/img/2021-191743/1634469327.png)

é€šå¸¸é€™è£¡çš„è®Šæ•¸ä¸æœƒç›´æ¥å¯«æ­»åœ¨é€™è£¡ï¼Œè€Œæ˜¯æœƒåœ¨å¦ä¸€å€‹æª”æ¡ˆä¸­å®šç¾© config.ini ä¹‹é¡çš„ç„¶å¾Œåœ¨é€éè®Šæ•¸ä¾†åšå–ç”¨

æ‰€ä»¥æˆ‘é€™é‚Šä¹Ÿæ˜¯å†æŒ–ä¸€å€‹å‘ï¼Œæœƒå†ç™¼ä¸€ç¯‡å¦‚ä½•å®šç¾© config.ini ç„¶å¾Œåœ¨ robot è£¡é¢ä¸­å¼•ç”¨é‚£å€‹ç’°å¢ƒè®Šæ•¸  
æ­¤å‘å·²è£œä¸Šï¼š[Robot Framework - ä½¿ç”¨ config.ini ç®¡ç†ç’°å¢ƒè®Šæ•¸ | sqz777 der æŠ€è¡“å°æœ¬æœ¬ - é»éƒ¨è½ (dotblogs.com.tw)](https://dotblogs.com.tw/Im_sqz777/2021/11/08/204911)

![](/img/2021-191743/1634469353.png)

\*\*\* Keywords \*\*\*
----------------------

é€™è£¡æ˜¯è‡ªå®šç¾©é—œéµå­—çš„åœ°æ–¹ï¼Œå¯ä»¥åœ¨é€™è£¡å®šç¾©å¥½é—œéµå­—å¾Œï¼Œåœ¨ Test Case ä¸­ä½¿ç”¨

![](/img/2021-191743/1634469372.png)

Get Character With Beginning Of The Nameï¼Œé€™å€‹æ˜¯ Keyword çš„åç¨±

\[Arguments\] è®“ Keyword è¢«å®šç¾©æˆæ˜¯å¯ä»¥è¢«å‚³å…¥åƒæ•¸çš„ï¼Œè€Œé€™å€‹åƒæ•¸åç¨±æ˜¯ character\_nameï¼Œå®šç¾©å®Œæˆå¾Œå³å¯åœ¨ Test Case ä¸­ä½¿ç”¨

è€Œ Keyword å†å¾€ä¸‹ä¸€å±¤å‰‡æ˜¯ python çš„ç¨‹å¼ç¢¼ï¼Œä»¥åœ–ä¸­è¡Œè™Ÿ 13 çš„ Get Md5 Hash ç‚ºä¾‹ï¼Œé€™å€‹ Get Md5 Hash æ˜¯æˆ‘è‡ªè¡Œå¯¦ä½œåœ¨ [common.py](http://common.py) çš„ä¸€æ®µ python code

P.S. [common.py](http://common.py) å·²åœ¨ settings.robot ä¸­å¼•å…¥ã€‚

    import hashlib
    
    def get_md5_hash(data):
        hasher = hashlib.md5()
        hasher.update(data.encode("utf-8"))
        return hasher.hexdigest()
    

ä»¥æ­¤ç‚ºä¾‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ Get Md5 Hash æˆ–æ˜¯ get\_md5\_hash éƒ½å¯ä»¥ï¼Œåªè¦æ–‡ä»¶å…§æœ‰çµ±ä¸€çš„æ ¼å¼å³å¯ã€‚

å…¶ä»–çš„ Keyword å°æ‡‰å®˜æ–¹æ–‡ä»¶æœ‰

*   [Get Time](https://robotframework.org/robotframework/latest/libraries/BuiltIn.html#Get%20Time)  
    å¯ä»¥æŒ‡å®šæ ¼å¼å–å¾— Datetime
*   [Create Dictionary](https://robotframework.org/robotframework/latest/libraries/BuiltIn.html#Create%20Dictionary)  
    å»ºç«‹ Dictionary
*   [Get On Session](https://marketsquare.github.io/robotframework-requests/doc/RequestsLibrary.html#GET%20On%20Session)  
    å»ºç«‹æ–¼ Session ä¸Šä¾† request å…¶æ–¹æ³•ç‚º Get
*   [Return From Keyword](https://robotframework.org/robotframework/latest/libraries/BuiltIn.html#Return%20From%20Keyword)  
    Get Character With Beginning Of The Name é€™ä¸€å€‹ Keyword å³å°‡è¿”å›çš„å€¼
*   [Should Be Equal As Strings](https://robotframework.org/robotframework/latest/libraries/BuiltIn.html#Should%20Be%20Equal%20As%20Strings)  
    æ–·è¨€ï¼ˆAssertï¼‰å…©å€‹å€¼çš„å‹æ…‹ç‚º string æ™‚æœƒæ˜¯ç›¸åŒçš„ã€‚

**\*\*\* Test Cases \*\*\***
----------------------------

é€™è£¡æ˜¯å®šç¾© Test Case çš„åœ°æ–¹ï¼Œæœƒé€éä½¿ç”¨ Keyword ä¾†çµ„åˆæˆéœ€è¦è¢«è‡ªå‹•åŒ–çš„æµç¨‹

![](/img/2021-191743/1634469384.png)

**é–‹ç™¼æº–å‚™**
--------

é–‹ç™¼å‰è¦æº–å‚™çš„å°±æ˜¯ç’°å¢ƒå•¦

*   python
*   python package: robotframework
*   python package: robotframework-requests

    python -m pip install robotframework robotframework-requests

**æ‡‰ç”¨å ´æ™¯**
--------

package å®‰è£å®Œæˆå¾Œï¼Œå°±å¯ä»¥é–‹å§‹å¯«ä¸€äº›éœ€è¦è‡ªå‹•åŒ–çš„é …ç›®äº†ï¼Œé–‹å§‹å¯«ä¹‹å‰å…ˆæ±ºå®šè¦åšçš„è‡ªå‹•åŒ–é …ç›®æ˜¯ä»€éº¼

*   æº–å‚™ request éå» Marvel API çš„ token è³‡è¨Šï¼ŒMarvel API çš„ token ç”³è«‹ï¼Œå¯ä»¥åƒè€ƒ repo ä¸­çš„ readmeÂ 
*   é€é Marvel çš„ API å–å¾—è§’è‰²åç¨±é–‹é ­ç‚º "Tony" çš„è§’è‰²è³‡è¨Š
*   å”¯ä¸€ä¸€å€‹è§’è‰²é–‹é ­ç‚º "Tony" çš„äººå°±æ˜¯ Tony Stark æ‰€ä»¥å¿…é ˆè¦èƒ½å–å¾— Tony Stark é€™å€‹åå­—

robot çš„ Test Suite å¦‚ä¸‹

    *** Settings ***
    Resource    settings.robot
    Suite Setup    Create Session    MARVEL_API    $/{$/{ENV/}.MARVEL_URL/}
    
    *** Variables ***
    $/{api_private_key/}=    $/{$/{ENV/}.MARVEL_PRIVATE_KEY/}
    $/{api_public_key/}=    $/{$/{ENV/}.MARVEL_PUBLIC_KEY/}
    
    *** Keywords ***
    Get Character With Beginning Of The Name
        [Arguments]    $/{character_name/}
        $/{timestamp/}=    Get Time    epoch
        $/{hash/}=    Get Md5 Hash    $/{timestamp/}$/{api_private_key/}$/{api_public_key/}
        $/{params/}=    Create Dictionary    ts=$/{timestamp/}    apikey=$/{api_public_key/}    hash=$/{hash/}    nameStartsWith=$/{character_name/}
        $/{response/}=    Get On Session    alias=MARVEL_API    url=/v1/public/characters    params=$/{params/}    expected_status=200
        Return From Keyword    $/{response/}
    
    *** Test Cases ***
    Get Beginning With Tony's Character Name Info
        $/{result/}=    Get Character With Beginning Of The Name    Tony
        Should Be Equal As Strings    $/{result.json()["data"]["results"][0]["name"]/}    Tony Stark
    

[Repo é»æˆ‘](https://github.com/SQZ777/robotframework-marvel)
----------------------------------------------------------

åŸ·è¡Œ
--

è‹¥è¦åŸ·è¡ŒæŒ‡ä»¤å¦‚ä¸‹

    python -m robot --variable ENV:BLOG_ENV marvel.robot

åŸ·è¡Œä¸­
---

![](/img/2021-191743/1637074430.png)

åŸ·è¡Œå¾Œ
---

åœ¨åŸ·è¡Œå¾Œå¯ä»¥çœ‹åˆ° Robot Framework ç”¢å‡ºçš„ report

![](/img/2021-191743/1637074439.png)

åœ¨ report ä¸­å¯ä»¥çœ‹åˆ°åŸ·è¡Œçš„æ™‚é–“èˆ‡æˆåŠŸæ•¸é‡ç­‰ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œä½ ä¹Ÿèƒ½å¤ é€é report çœ‹è¦‹åŸ·è¡Œçš„ç´°ç¯€ï¼Œä¾‹å¦‚ API çš„ response jsonã€è©²æ­¥é©Ÿçš„åŸ·è¡Œæ™‚é–“ç­‰

![](/img/2021-191743/1637074452.png)

å¾Œè¨˜
--

é€™ä¸€ç¯‡ä»‹ç´¹äº†ç‚ºä½•è¦ä½¿ç”¨ Robot Frameworkï¼Œå†åˆ°å¦‚ä½•çœ‹æ‡‚ Robot Framework çš„æ–‡ä»¶ï¼Œå¸Œæœ›å¤§å®¶å¯ä»¥å› ç‚ºé€™ç¯‡è€Œçœ‹å¾—æ‡‚ Robot Framework <(\_ \_)>

å·²è£œå‘ï¼š

*   [Suite Setup V.S. Test Setup](https://dotblogs.com.tw/Im_sqz777/2021/11/16/224604)
*   [åœ¨ Robot Framework ä¸­ï¼Œä½¿ç”¨ config.ini çš„æª”æ¡ˆå®šç¾©ç’°å¢ƒè®Šæ•¸](https://dotblogs.com.tw/Im_sqz777/2021/11/08/204911)

2021/11/16ï¼šè£œå……åŸ·è¡Œæ‰€éœ€çš„ç’°å¢ƒæº–å‚™ä»¥åŠå¯¦éš›çš„é¡Œç›®æ‡‰ç”¨ã€‚